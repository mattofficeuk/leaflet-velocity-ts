(()=>{var t,e,i,n,o,a,s={286:(t,e,i)=>{i.d(e,{Z:()=>o});var e=i(537),e=i.n(e),n=i(645);(i=i.n(n)()(e())).push([t.id,'.IoWwiOJa3pQTAZUawPer {\n  background-color: rgba(255, 255, 255, 0.7);\n  padding: 0 5px;\n  margin: 0 !important;\n  color: #333;\n  font: 11px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n}\n',"",{version:3,sources:["webpack://./src/leaflet-velocity.css"],names:[],mappings:"AAAA;EACE,0CAA0C;EAC1C,cAAc;EACd,oBAAoB;EACpB,WAAW;EACX,6DAA6D;AAC/D",sourcesContent:['.leafletControlVelocity {\n  background-color: rgba(255, 255, 255, 0.7);\n  padding: 0 5px;\n  margin: 0 !important;\n  color: #333;\n  font: 11px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n}\n'],sourceRoot:""}]),i.locals={leafletControlVelocity:"IoWwiOJa3pQTAZUawPer"};let o=i},645:t=>{t.exports=function(n){var c=[];return c.toString=function(){return this.map(function(t){var e="",i=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),i&&(e+="@layer".concat(0<t[5].length?" ".concat(t[5]):""," {")),e+=n(t),i&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e}).join("")},c.i=function(t,e,i,n,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(a[r]=!0)}for(var h=0;h<t.length;h++){var l=[].concat(t[h]);i&&a[l[0]]||(void 0!==o&&(void 0!==l[5]&&(l[1]="@layer".concat(0<l[5].length?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),e&&(l[2]&&(l[1]="@media ".concat(l[2]," {").concat(l[1],"}")),l[2]=e),n&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=n):l[4]="".concat(n)),c.push(l))}},c}},537:t=>{t.exports=function(t){var e=t[1];return(t=t[3])?("function"==typeof btoa?(t=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),t="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t),t="/*# ".concat(t," */"),[e].concat([t])):[e]).join("\n"):e}},9:(t,e,i)=>{i.r(e),i.d(e,{default:()=>l});var e=i(379),e=i.n(e),n=i(795),n=i.n(n),o=i(569),o=i.n(o),a=i(565),a=i.n(a),s=i(216),s=i.n(s),r=i(589),r=i.n(r),i=i(286),h={};h.styleTagTransform=r(),h.setAttributes=a(),h.insert=o().bind(null,"head"),h.domAPI=n(),h.insertStyleElement=s(),e()(i.Z,h);let l=i.Z&&i.Z.locals?i.Z.locals:void 0},379:t=>{var l=[];function c(t){for(var e=-1,i=0;i<l.length;i++)if(l[i].identifier===t){e=i;break}return e}function r(t,e){for(var i={},n=[],o=0;o<t.length;o++){var a=t[o],s=i[h=e.base?a[0]+e.base:a[0]]||0,r="".concat(h," ").concat(s),h=(i[h]=s+1,c(r)),s={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};-1!==h?(l[h].references++,l[h].updater(s)):(a=((e,t)=>{var i=t.domAPI(t);return i.update(e),function(t){t?t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer||i.update(e=t):i.remove()}})(s,e),e.byIndex=o,l.splice(o,0,{identifier:r,updater:a,references:1})),n.push(r)}return n}t.exports=function(t,a){var s=r(t=t||[],a=a||{});return function(t){t=t||[];for(var e=0;e<s.length;e++){var i=c(s[e]);l[i].references--}for(var t=r(t,a),n=0;n<s.length;n++){var o=c(s[n]);0===l[o].references&&(l[o].updater(),l.splice(o,1))}s=t}}},569:t=>{var i={};t.exports=function(t,e){if(!(t=(t=>{if(void 0===i[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}i[t]=e}return i[t]})(t)))throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(a){var s=a.insertStyleElement(a);return{update:function(t){var e,i=s,n=a,o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {")),(e=void 0!==t.layer)&&(o+="@layer".concat(0<t.layer.length?" ".concat(t.layer):""," {")),o+=t.css,e&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}"),(e=t.sourceMap)&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(e))))," */")),n.styleTagTransform(o,i,n.options)},remove:function(){null!==s.parentNode&&s.parentNode.removeChild(s)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},45:(t,e)=>{function i(){}Object.defineProperty(e,"__esModule",{value:!0}),L.DomUtil.setTransform||(L.DomUtil.setTransform=function(t,e,i){e=e||new L.Point(0,0),t.style[L.DomUtil.TRANSFORM]=(L.Browser.ie3d?"translate("+e.x+"px,"+e.y+"px)":"translate3d("+e.x+"px,"+e.y+"px,0)")+(i?" scale("+i+")":"")}),i.prototype.initialize=function(t){this._map=null,this._canvas=null,this._frame=null,this._del=null,L.Util.setOptions(this,t)},i.prototype.getCanvas=function(){return this._canvas},i.prototype.delegate=function(t){return this._del=t,this},i.prototype.needRedraw=function(){return this._frame||(this._frame=L.Util.requestAnimFrame(this.drawLayer,this)),this},i.prototype.getEvents=function(){var t={resize:this.onLayerDidResize,moveend:this.onLayerDidMove,zoomanim:void 0};return this._map.options.zoomAnimation&&L.Browser.any3d&&(t.zoomanim=this.animateZoom),t},i.prototype.onAdd=function(t){var e=this,i=(this._map=t,this._canvas=L.DomUtil.create("canvas","leaflet-layer"),this._map.getSize()),i=(this._canvas.width=i.x,this._canvas.height=i.y,this._map.options.zoomAnimation&&L.Browser.any3d);L.DomUtil.addClass(this._canvas,"leaflet-zoom-"+(i?"animated":"hide")),t.getPanes().overlayPane.appendChild(this._canvas),t.on(this.getEvents(),this),(i=this._del||this).onLayerDidMount&&i.onLayerDidMount(),this.needRedraw(),setTimeout(function(){e.onLayerDidMove()},0)},i.prototype.onRemove=function(t){var e=this._del||this;e.onLayerWillUnmount&&e.onLayerWillUnmount(),t.getPanes().overlayPane.removeChild(this._canvas),t.off(this.getEvents(),this),this._canvas=null},i.prototype.addTo=function(t){return t.addLayer(this),this},i.prototype.drawLayer=function(){var t,e,i,n,o,a;this._map?(t=this._map.getSize(),e=this._map.getBounds(),i=this._map.getZoom(),n=this._map.options.crs.project(this._map.getCenter()),o=this._map.options.crs.project(this._map.containerPointToLatLng(this._map.getSize())),(a=this._del||this).onDrawLayer&&a.onDrawLayer({layer:this,canvas:this._canvas,bounds:e,size:t,zoom:i,center:n,corner:o}),this._frame=null):console.log("Error: this._map is not defined in drawLayer")},i.prototype._setTransform=function(t,e,i){e=e||new L.Point(0,0),t.style[L.DomUtil.TRANSFORM]=(L.Browser.ie3d?"translate("+e.x+"px,"+e.y+"px)":"translate3d("+e.x+"px,"+e.y+"px,0)")+(i?" scale("+i+")":"")},i.prototype.animateZoom=function(t){var e;this._map?(e=this._map.getZoomScale(t.zoom),t=L.Layer?this._map._latLngToNewLayerPoint(this._map.getBounds().getNorthWest(),t.zoom,t.center):this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos()),L.DomUtil.setTransform(this._canvas,t,e)):console.log("Error: this._map is not defined in animateZoom")},i.prototype.onLayerDidResize=function(t){this._canvas.width=t.newSize.x,this._canvas.height=t.newSize.y},i.prototype.onLayerDidMove=function(){var t;this._map?(t=this._map.containerPointToLayerPoint([0,0]),L.DomUtil.setPosition(this._canvas,t),this.drawLayer()):console.log("Error: this._map is not defined in onLayerDidMove")},e.default=i},77:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=i(9);function o(){this._windy=null,this._map=null,this._container=null,this.options={position:"bottomleft",emptyString:"Unavailable",velocityType:"",angleConvention:"bearingCCW",speedUnit:"m/s",directionString:"Direction",speedString:"Speed",showCardinal:!1}}o.prototype.setWindy=function(t){!this._windy&&t&&(this._windy=t)},o.prototype.setOptions=function(t){L.Util.setOptions(this,t)},o.prototype.onAdd=function(t){return this._map=t,this._container=L.DomUtil.create("div",n.default.leafletControlVelocity),L.DomEvent.disableClickPropagation(this._container),this._map.on("mousemove",this.drawWindSpeed,this),this._container.innerHTML=this.options.emptyString,this._container},o.prototype.onRemove=function(t){this._map.off("mousemove",this.drawWindSpeed,this)},o.prototype.vectorToSpeed=function(t,e,i){return t=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),"k/h"===i?this.meterSec2kilometerHour(t):"kt"===i?this.meterSec2Knots(t):"mph"===i?this.meterSec2milesHour(t):t},o.prototype.vectorToDegrees=function(t,e,i){i.endsWith("CCW")&&(e=0<e?-e:Math.abs(e));var n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),t=180*Math.atan2(t/n,e/n)/Math.PI+180;return"bearingCW"!==i&&"meteoCCW"!==i||360<=(t+=180)&&(t-=360),t},o.prototype.meterSec2Knots=function(t){return t/.514},o.prototype.meterSec2kilometerHour=function(t){return 3.6*t},o.prototype.meterSec2milesHour=function(t){return 2.23694*t},o.prototype.degreesToCardinalDirection=function(t){var e="";return 0<=t&&t<11.25||348.75<=t?e="N":11.25<=t&&t<33.75?e="NNW":33.75<=t&&t<56.25?e="NW":56.25<=t&&t<78.75?e="WNW":78.25<=t&&t<101.25?e="W":101.25<=t&&t<123.75?e="WSW":123.75<=t&&t<146.25?e="SW":146.25<=t&&t<168.75?e="SSW":168.75<=t&&t<191.25?e="S":191.25<=t&&t<213.75?e="SSE":213.75<=t&&t<236.25?e="SE":236.25<=t&&t<258.75?e="ESE":258.75<=t&&t<281.25?e="E":281.25<=t&&t<303.75?e="ENE":303.75<=t&&t<326.25?e="NE":326.25<=t&&t<348.75&&(e="NNE"),e},o.prototype.drawWindSpeed=function(t){var e,i,t=this._map.containerPointToLatLng(L.point(t.containerPoint.x,t.containerPoint.y)),n="";(t=this._windy.interpolate(t.lng,t.lat))&&!isNaN(t[0])&&!isNaN(t[1])&&t[2]?(e=this.vectorToDegrees(t[0],t[1],this.options.angleConvention),i=this.options.showCardinal?" (".concat(this.degreesToCardinalDirection(e),") "):"",n="<strong> ".concat(this.options.velocityType," ").concat(this.options.directionString,": </strong> ").concat(e.toFixed(2),"°").concat(i,", <strong> ").concat(this.options.velocityType," ").concat(this.options.speedString,": </strong> ").concat(this.vectorToSpeed(t[0],t[1],this.options.speedUnit).toFixed(2)," ").concat(this.options.speedUnit)):this.options.emptyString&&(n=this.options.emptyString),this._container.innerHTML=n},e.default=o},366:function(t,e,i){var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=(Object.defineProperty(e,"__esModule",{value:!0}),i(172)),a=i(871),s=i(611),r=i(451);function h(){this._map=null,this._canvasLayer=null,this._windy=null,this._context=null,this._displayTimeout=null,this._mapEvents=null,this._mouseControl=null,this._paneName=null,this.options={displayValues:!0,displayOptions:{velocityType:"Velocity",position:"bottomleft",emptyString:"No velocity data",angleConvention:"bearingCCW",speedUnit:"m/s"},maxVelocity:10,colorScale:null,onAdd:null,onRemove:null,data:null,paneName:"overlayPane"}}h.prototype.initialize=function(t){L.Util.setOptions(this,t)},h.prototype.setOptions=function(t){this.options=n(n({},this.options),t),t.displayOptions&&(this.options.displayOptions=n(n({},this.options.displayOptions),t.displayOptions),this.initMouseHandler(!0)),t.data&&(this.options.data=t.data),this._windy&&(this._windy.setOptions(t),t.data&&this._windy.setData(t.data),this.clearAndRestart()),this.fire("load")},h.prototype.onAdd=function(t){this._paneName=this.options.paneName||"overlayPane",t.getPanes().overlayPane,t.getPane&&!t.getPane(this._paneName)&&t.createPane(this._paneName),this._canvasLayer=L.canvasLayer().delegate(this),this._canvasLayer.addTo(t),this._map=t,this.options.onAdd&&this.options.onAdd()},h.prototype.onRemove=function(t){this.destroyWind(),this.options.onRemove&&this.options.onRemove()},h.prototype.setData=function(t){this.options.data=t,this._windy&&(this._windy.setData(t),this.clearAndRestart()),this.fire("load")},h.prototype.onDrawLayer=function(){var t=this;this._windy?this.options.data&&(this._displayTimeout&&clearTimeout(this._displayTimeout),this._displayTimeout=setTimeout(function(){t.startWindy()},150)):this.initWindy()},h.prototype.toggleEvents=function(t){var e,i=this;for(e in void 0===t&&(t=!0),null===this._mapEvents&&(this._mapEvents={dragstart:function(){i._windy.stop()},dragend:function(){i.clearAndRestart()},zoomstart:function(){i._windy.stop()},zoomend:function(){i.clearAndRestart()},resize:function(){i.clearWind()}}),this._mapEvents)this._mapEvents.hasOwnProperty(e)&&this._map[t?"on":"off"](e,this._mapEvents[e])},h.prototype.initWindy=function(){var t=n(n({},this.options),{canvas:this._canvasLayer.getCanvas()});this._windy=new o.default(t),this._context=this._canvasLayer.getCanvas().getContext("2d"),this._canvasLayer.getCanvas().classList.add("velocity-overlay"),this.onDrawLayer(),this.toggleEvents(!0),this.initMouseHandler()},h.prototype.initMouseHandler=function(t){(t=void 0!==t&&t)&&(this._map.removeControl(this._mouseControl),this._mouseControl=!1),!this._mouseControl&&this.options.displayValues&&(t=this.options.displayOptions||{},this._mouseControl=L.control.velocity(t),this._mouseControl.setWindy(this._windy),this._mouseControl.setOptions(this.options.displayOptions),this._mouseControl.addTo(this._map))},h.prototype.startWindy=function(){var t=this._map.getBounds(),e=this._map.getSize();this._windy.start(new r.default(new s.default(this._map,t.getNorthEast().lat,t.getNorthEast().lng,t.getSouthWest().lat,t.getSouthWest().lng),new a.default(0,0,e.x,e.y)))},h.prototype.clearAndRestart=function(){this._context&&this._context.clearRect(0,0,3e3,3e3),this._windy&&this.startWindy()},h.prototype.clearWind=function(){this._windy&&this._windy.stop(),this._context&&this._context.clearRect(0,0,3e3,3e3)},h.prototype.destroyWind=function(){this._displayTimeout&&clearTimeout(this._displayTimeout),this._windy&&this._windy.stop(),this._context&&this._context.clearRect(0,0,3e3,3e3),this._mouseControl&&this._map.removeControl(this._mouseControl),this._mouseControl=null,this._windy=null,this.toggleEvents(!1),this._map.removeLayer(this._canvasLayer)},e.default=h},391:(t,e)=>{function i(t){this.buckets=[],this.colorScale=t;for(var e=0;e<t.size;e++)this.buckets.push([])}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.clear=function(){this.buckets.forEach(function(t){t.splice(0,t.length)})},i.prototype.add=function(t,e){var i=this.colorScale.getColorIndex(t.intensity);i<0||i>=this.buckets.length?console.log(i):(t.xt=t.x+e.u,t.yt=t.y+e.v,this.buckets[i].push(t))},i.prototype.draw=function(i){var n=this;this.buckets.forEach(function(t,e){0<t.length&&(i.beginPath(),i.strokeStyle=n.colorScale.colorAt(e),t.forEach(function(t){i.moveTo(t.x,t.y),i.lineTo(t.xt,t.yt),t.x=t.xt,t.y=t.yt}),i.stroke())})},e.default=i},871:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=i(217);function o(t,e,i,n){this.xMin=t,this.yMin=e,this.xMax=i,this.yMax=n}Object.defineProperty(o.prototype,"width",{get:function(){return this.xMax-this.xMin},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.yMax-this.yMin},enumerable:!1,configurable:!0}),o.prototype.getRandomParticule=function(t){var e=Math.round(Math.floor(Math.random()*this.width)+this.xMin),i=Math.round(Math.floor(Math.random()*this.height)+this.yMin);return new n.default(e,i,t)},o.prototype.resetParticule=function(t){var e=Math.round(Math.floor(Math.random()*this.width)+this.xMin),i=Math.round(Math.floor(Math.random()*this.height)+this.yMin);return t.reset(e,i),t},e.default=o},0:(t,e)=>{function i(t,e,i){this.scale=["rgb(36,104, 180)","rgb(60,157, 194)","rgb(128,205,193 )","rgb(151,218,168 )","rgb(198,231,181)","rgb(238,247,217)","rgb(255,238,159)","rgb(252,217,125)","rgb(255,182,100)","rgb(252,150,75)","rgb(250,112,52)","rgb(245,64,32)","rgb(237,45,28)","rgb(220,24,32)","rgb(180,0,35)"],this.setMinMax(t,e),i instanceof Array&&i.length&&(this.scale=i)}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.setMinMax=function(t,e){this.minValue=t,this.maxValue=e},Object.defineProperty(i.prototype,"size",{get:function(){return this.scale.length},enumerable:!1,configurable:!0}),i.prototype.getColorIndex=function(t){return t<=this.minValue?0:t>=this.maxValue?this.scale.length-1:(t=this.scale.length*(t-this.minValue)/(this.maxValue-this.minValue))<0?0:t>this.scale.length-1?this.scale.length-1:Math.floor(t)},i.prototype.colorAt=function(t){return this.scale[t]},i.prototype.getColor=function(t){return this.scale[this.getColorIndex(t)]},e.default=i},462:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var l=i(464),i=(Object.defineProperty(n.prototype,"valueRange",{get:function(){var e,i;return this.data.length?(e=this.data[0].intensity,i=this.data[0].intensity,this.data.forEach(function(t){e=Math.min(e,t.intensity),i=Math.max(i,t.intensity)}),[e,i]):[0,0]},enumerable:!1,configurable:!0}),n.prototype.get=function(t,e){var t=this.floorMod(t-this.λ0,360)/this.Δλ,e=(this.φ0-e)/this.Δφ,i=Math.floor(t),n=i+1;n>=this.width&&(n=this.λ0);var o=(s=Math.floor(e))+1,t=(o>=this.height&&(o=s),t-i),e=e-s;if(0<=i&&0<=s&&i<this.width&&s<this.height){var a=this.data[i+s*this.width],s=this.data[n+s*this.width];if(this.isValue(a)&&this.isValue(s)&&(i=this.data[i+o*this.width],n=this.data[n+o*this.width],this.isValue(i))&&this.isValue(n))return this.interpolation(t,e,a,s,i,n)}return new l.default(0,0)},n.prototype.interpolation=function(t,e,i,n,o,a){var s=1-t,r=s*(h=1-e),h=t*h,t=t*e,e=i.u*r+n.u*h+o.u*(s=s*e)+a.u*t;return new l.default(e,i.v*r+n.v*h+o.v*s+a.v*t)},n.prototype.floorMod=function(t,e){return t-e*Math.floor(t/e)},n.prototype.isValue=function(t){return null!=t},n);function n(t,e,i,n,o,a,s){this.data=t,this.φ0=e,this.λ0=i,this.Δλ=o,this.Δφ=n,this.height=a,this.width=s}e.default=i},451:(t,e)=>{function i(t,e){this.canvasBound=e,this.mapBound=t}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.canvasToMap=function(t,e){var i=this.mapBound.east-this.mapBound.west,n=this.canvasBound.width/this.rad2deg(i)*360/(2*Math.PI),o=n/2*Math.log((1+Math.sin(this.mapBound.south))/(1-Math.sin(this.mapBound.south))),o=(this.canvasBound.height+o-e)/n,e=180/Math.PI*(2*Math.atan(Math.exp(o))-Math.PI/2);return[this.rad2deg(this.mapBound.west)+t/this.canvasBound.width*this.rad2deg(i),e]},i.prototype.mercY=function(t){return Math.log(Math.tan(t/2+Math.PI/4))},i.prototype.mapToCanvas=function(t,e){var i=this.mercY(this.mapBound.south),n=this.mercY(this.mapBound.north),o=this.canvasBound.width/(this.mapBound.east-this.mapBound.west),i=this.canvasBound.height/(n-i),e=this.mercY(this.deg2rad(e));return[(this.deg2rad(t)-this.mapBound.west)*o,(n-e)*i]},i.prototype.rad2deg=function(t){return 180*t/Math.PI},i.prototype.deg2rad=function(t){return t*Math.PI/180},i.prototype.distortion=function(t,e,i,n){var o=2*Math.PI,a=t<0?5:-5,s=e<0?5:-5,r=this.mapToCanvas(t+a,e),t=this.mapToCanvas(t,e+s),e=Math.cos(e/360*o);return[(r[0]-i)/a/e,(r[1]-n)/a/e,(t[0]-i)/s,(t[1]-n)/s]},i.prototype.distort=function(t,e,i,n,o,a){var s=a.u*o,o=a.v*o,t=this.distortion(t,e,i,n);return a.u=t[0]*s+t[2]*o,a.v=t[1]*s+t[3]*o,a},e.default=i},611:(t,e)=>{function i(t,e,i,n,o){this._map=t,this.north=e*Math.PI/180,this.east=i*Math.PI/180,this.south=n*Math.PI/180,this.west=o*Math.PI/180}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return(720+this.east-this.west)%360},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return(360+this.north-this.south)%180},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),e.default=i},217:(t,e)=>{function i(t,e,i){this.x=t,this.y=e,this.age=Math.floor(Math.random()*i),this.maxAge=i}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.reset=function(t,e){this.x=t,this.y=e,this.age=0},Object.defineProperty(i.prototype,"isDead",{get:function(){return this.age>this.maxAge},enumerable:!1,configurable:!0}),i.prototype.grow=function(){this.age++},e.default=i},464:(t,e)=>{function i(t,e){this.u=t||0,this.v=e||0}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(i.prototype,"intensity",{get:function(){return Math.sqrt(this.u*this.u+this.v*this.v)},enumerable:!1,configurable:!0}),e.default=i},172:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var l=i(464),c=i(462),n=i(0),o=i(391);function a(t){this.canvas=null,this.particleMultiplier=1/300,this.autoColorRange=!1,this.particules=[],this.animationLoop=null,this.then=0,this.setOptions(t),this.canvas=t.canvas,t.data&&this.setData(t.data)}a.prototype.setOptions=function(t){void 0===t.minVelocity&&void 0===t.maxVelocity&&(this.autoColorRange=!0),this.colorScale=new n.default(t.minVelocity||0,t.maxVelocity||10,t.colorScale),this.velocityScale=t.velocityScale||.01,this.particleAge=t.particleAge||64,this.opacity=+t.opacity||.97,this.particleMultiplier=t.particleMultiplier||1/300,this.particleLineWidth=t.particlelineWidth||1,this.frameTime=1e3/(t.frameRate||15)},Object.defineProperty(a.prototype,"particuleCount",{get:function(){var t=/android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i.test(navigator.userAgent)?Math.pow(window.devicePixelRatio,1/3)||1.6:1;return Math.round(this.layer.canvasBound.width*this.layer.canvasBound.height*this.particleMultiplier)*t},enumerable:!1,configurable:!0}),a.prototype.setData=function(t){var e=null,i=null,n=[];if(t.forEach(function(t){switch("".concat(t.header.parameterCategory,",").concat(t.header.parameterNumber)){case"1,2":case"2,2":e=t;break;case"1,3":case"2,3":i=t}}),e&&i){e.data.forEach(function(t,e){n.push(new l.default(t,i.data[e]))}),this.grid=new c.default(n,e.header.la1,e.header.lo1,e.header.dy,e.header.dx,e.header.ny,e.header.nx),this.λ0=e.header.lo1,this.φ0=e.header.la1,this.Δλ=e.header.dx,this.Δφ=e.header.dy,this.ni=e.header.nx,this.nj=e.header.ny;for(var o=0,a=360<=Math.floor(this.ni*this.Δλ),s=0;s<this.nj;s++){for(var r=[],h=0;h<this.ni;h++,o++)r[h]=this.grid.data[o];a&&r.push(r[0]),this.grid[s]=r}this.autoColorRange&&(t=this.grid.valueRange,this.colorScale.setMinMax(t[0],t[1]))}else console.warn("Data are not correct format")},a.prototype.interpolate=function(t,e){if(this.grid){var t=this.floorMod(t-this.λ0,360)/this.Δλ,e=(this.φ0-e)/this.Δφ,i=Math.floor(t),n=i+1,o=Math.floor(e),a=o+1,s=this.grid[o];if(s){var r=s[i],h=s[n];if(this.isValue(r)&&this.isValue(h)&&(s=this.grid[a])&&(a=s[i],s=s[n],this.isValue(a))&&this.isValue(s))return this.bilinearInterpolateVector(t-i,e-o,r,h,a,s)}}return null},a.prototype.start=function(t){this.context2D=this.canvas.getContext("2d"),this.context2D.lineWidth=this.particleLineWidth,this.context2D.fillStyle="rgba(0, 0, 0, ".concat(this.opacity,")"),this.context2D.globalAlpha=.6,this.layer=t,this.animationBucket=new o.default(this.colorScale),this.particules.splice(0,this.particules.length);for(var e=0;e<this.particuleCount;e++)this.particules.push(this.layer.canvasBound.getRandomParticule(this.particleAge));this.then=(new Date).getTime(),this.frame()},a.prototype.stop=function(){this.particules.splice(0,this.particules.length),this.animationBucket?this.animationBucket.clear():console.log("animationBucket is not defined"),this.animationLoop&&(clearTimeout(this.animationLoop),this.animationLoop=null)},a.prototype.floorMod=function(t,e){return t-e*Math.floor(t/e)},a.prototype.isValue=function(t){return null!=t},a.prototype.bilinearInterpolateVector=function(t,e,i,n,o,a){var s=1-t,r=s*(h=1-e),h=t*h,t=t*e;return[e=i.u*r+n.u*h+o.u*(s=s*e)+a.u*t,i=i.v*r+n.v*h+o.v*s+a.v*t,Math.sqrt(e*e+i*i)]},a.prototype.getParticuleWind=function(t){var e=this.layer.canvasToMap(t.x,t.y),i=this.grid.get(e[0],e[1]),n=(t.intensity=i.intensity,this.layer.mapBound.height*this.layer.mapBound.width),n=this.velocityScale*Math.pow(n,.4);return this.layer.distort(e[0],e[1],t.x,t.y,n,i),i},a.prototype.frame=function(){var t=this,e=(this.animationLoop=requestAnimationFrame(function(){t.frame()}),(new Date).getTime()),i=e-this.then;i>this.frameTime&&(this.then=e-i%this.frameTime,this.evolve(),this.draw())},a.prototype.evolve=function(){var i=this;this.animationBucket.clear(),this.particules.forEach(function(t){t.grow(),t.isDead&&i.layer.canvasBound.resetParticule(t);var e=i.getParticuleWind(t);i.animationBucket.add(t,e)})},a.prototype.draw=function(){this.context2D.globalCompositeOperation="destination-in",this.context2D.fillRect(this.layer.canvasBound.xMin,this.layer.canvasBound.yMin,this.layer.canvasBound.width,this.layer.canvasBound.height),this.context2D.globalCompositeOperation="lighter",this.context2D.globalAlpha=0===this.opacity?0:.9*this.opacity,this.animationBucket.draw(this.context2D)},e.default=a}},r={};function h(t){var e=r[t];return void 0===e&&(e=r[t]={id:t,exports:{}},s[t].call(e.exports,e,e.exports,h)),e.exports}h.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return h.d(e,{a:e}),e},h.d=(t,e)=>{for(var i in e)h.o(e,i)&&!h.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},h.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),h.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},h.nc=void 0,t=h(871),e=h(611),i=h(172),n=h(45),o=h(366),a=h(77),window.CanvasBound=t.default,window.MapBound=e.default,window.Windy=i.default,L.CanvasLayer=(L.Layer||L.Class).extend(new n.default),L.canvasLayer=function(){return new L.CanvasLayer},L.Control.Velocity=L.Control.extend(new a.default),L.control.velocity=function(t){return new L.Control.Velocity(t)},L.VelocityLayer=(L.Layer||L.Class).extend(new o.default),L.velocityLayer=function(t){return new L.VelocityLayer(t)}})();